{"version":3,"names":["_getJestObj","mock","v4","jest","fn","removeItem","storeItem","getItem","require","db","addItem","ITEM","id","uuid","test","name","req","body","res","send","mockReturnValue","expectedItem","completed","expect","calls","length","toBe","toEqual"],"sources":["addItem.spec.js"],"sourcesContent":["const db = require('../../src/persistence');\nconst addItem = require('../../src/routes/addItem');\nconst ITEM = { id: 12345 };\nconst {v4 : uuid} = require('uuid');\n\njest.mock('uuid', () => ({ v4: jest.fn() }));\n\njest.mock('../../src/persistence', () => ({\n    removeItem: jest.fn(),\n    storeItem: jest.fn(),\n    getItem: jest.fn(),\n}));\n\ntest('it stores item correctly', async () => {\n    const id = 'something-not-a-uuid';\n    const name = 'A sample item';\n    const req = { body: { name } };\n    const res = { send: jest.fn() };\n\n    uuid.mockReturnValue(id);\n\n    await addItem(req, res);\n\n    const expectedItem = { id, name, completed: false };\n\n    expect(db.storeItem.mock.calls.length).toBe(1);\n    expect(db.storeItem.mock.calls[0][0]).toEqual(expectedItem);\n    expect(res.send.mock.calls[0].length).toBe(1);\n    expect(res.send.mock.calls[0][0]).toEqual(expectedItem);\n});\n"],"mappings":"AAKAA,WAAA,GAAKC,IAAI,CAAC,MAAM,EAAE,OAAO;EAAEC,EAAE,EAAEC,IAAI,CAACC,EAAE,CAAC;AAAE,CAAC,CAAC,CAAC;AAE5CJ,WAAA,GAAKC,IAAI,CAAC,uBAAuB,EAAE,OAAO;EACtCI,UAAU,EAAEF,IAAI,CAACC,EAAE,CAAC,CAAC;EACrBE,SAAS,EAAEH,IAAI,CAACC,EAAE,CAAC,CAAC;EACpBG,OAAO,EAAEJ,IAAI,CAACC,EAAE,CAAC;AACrB,CAAC,CAAC,CAAC;AAAC,SAAAJ,YAAA;EAAA;IAAAG;EAAA,IAAAK,OAAA;EAAAR,WAAA,GAAAA,CAAA,KAAAG,IAAA;EAAA,OAAAA,IAAA;AAAA;AAXJ,MAAMM,EAAE,GAAGD,OAAO,CAAC,uBAAuB,CAAC;AAC3C,MAAME,OAAO,GAAGF,OAAO,CAAC,0BAA0B,CAAC;AACnD,MAAMG,IAAI,GAAG;EAAEC,EAAE,EAAE;AAAM,CAAC;AAC1B,MAAM;EAACV,EAAE,EAAGW;AAAI,CAAC,GAAGL,OAAO,CAAC,MAAM,CAAC;AAUnCM,IAAI,CAAC,0BAA0B,EAAE,YAAY;EACzC,MAAMF,EAAE,GAAG,sBAAsB;EACjC,MAAMG,IAAI,GAAG,eAAe;EAC5B,MAAMC,GAAG,GAAG;IAAEC,IAAI,EAAE;MAAEF;IAAK;EAAE,CAAC;EAC9B,MAAMG,GAAG,GAAG;IAAEC,IAAI,EAAEhB,IAAI,CAACC,EAAE,CAAC;EAAE,CAAC;EAE/BS,IAAI,CAACO,eAAe,CAACR,EAAE,CAAC;EAExB,MAAMF,OAAO,CAACM,GAAG,EAAEE,GAAG,CAAC;EAEvB,MAAMG,YAAY,GAAG;IAAET,EAAE;IAAEG,IAAI;IAAEO,SAAS,EAAE;EAAM,CAAC;EAEnDC,MAAM,CAACd,EAAE,CAACH,SAAS,CAACL,IAAI,CAACuB,KAAK,CAACC,MAAM,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC;EAC9CH,MAAM,CAACd,EAAE,CAACH,SAAS,CAACL,IAAI,CAACuB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACG,OAAO,CAACN,YAAY,CAAC;EAC3DE,MAAM,CAACL,GAAG,CAACC,IAAI,CAAClB,IAAI,CAACuB,KAAK,CAAC,CAAC,CAAC,CAACC,MAAM,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC;EAC7CH,MAAM,CAACL,GAAG,CAACC,IAAI,CAAClB,IAAI,CAACuB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACG,OAAO,CAACN,YAAY,CAAC;AAC3D,CAAC,CAAC"}