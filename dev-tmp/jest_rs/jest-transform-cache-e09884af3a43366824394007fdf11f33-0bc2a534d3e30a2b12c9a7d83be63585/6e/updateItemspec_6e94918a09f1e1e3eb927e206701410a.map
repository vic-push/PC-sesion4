{"version":3,"names":["_getJestObj","mock","getItem","jest","fn","updateItem","require","db","ITEM","id","test","req","params","body","name","completed","res","send","mockReturnValue","Promise","resolve","expect","calls","length","toBe","toEqual"],"sources":["updateItem.spec.js"],"sourcesContent":["const db = require('../../src/persistence');\nconst updateItem = require('../../src/routes/updateItem');\nconst ITEM = { id: 12345 };\n\njest.mock('../../src/persistence', () => ({\n    getItem: jest.fn(),\n    updateItem: jest.fn(),\n}));\n\ntest('it updates items correctly', async () => {\n    const req = {\n        params: { id: 1234 },\n        body: { name: 'New title', completed: false },\n    };\n    const res = { send: jest.fn() };\n\n    db.getItem.mockReturnValue(Promise.resolve(ITEM));\n\n    await updateItem(req, res);\n\n    expect(db.updateItem.mock.calls.length).toBe(1);\n    expect(db.updateItem.mock.calls[0][0]).toBe(req.params.id);\n    expect(db.updateItem.mock.calls[0][1]).toEqual({\n        name: 'New title',\n        completed: false,\n    });\n\n    expect(db.getItem.mock.calls.length).toBe(1);\n    expect(db.getItem.mock.calls[0][0]).toBe(req.params.id);\n\n    expect(res.send.mock.calls[0].length).toBe(1);\n    expect(res.send.mock.calls[0][0]).toEqual(ITEM);\n});\n"],"mappings":"AAIAA,WAAA,GAAKC,IAAI,CAAC,uBAAuB,EAAE,OAAO;EACtCC,OAAO,EAAEC,IAAI,CAACC,EAAE,CAAC,CAAC;EAClBC,UAAU,EAAEF,IAAI,CAACC,EAAE,CAAC;AACxB,CAAC,CAAC,CAAC;AAAC,SAAAJ,YAAA;EAAA;IAAAG;EAAA,IAAAG,OAAA;EAAAN,WAAA,GAAAA,CAAA,KAAAG,IAAA;EAAA,OAAAA,IAAA;AAAA;AAPJ,MAAMI,EAAE,GAAGD,OAAO,CAAC,uBAAuB,CAAC;AAC3C,MAAMD,UAAU,GAAGC,OAAO,CAAC,6BAA6B,CAAC;AACzD,MAAME,IAAI,GAAG;EAAEC,EAAE,EAAE;AAAM,CAAC;AAO1BC,IAAI,CAAC,4BAA4B,EAAE,YAAY;EAC3C,MAAMC,GAAG,GAAG;IACRC,MAAM,EAAE;MAAEH,EAAE,EAAE;IAAK,CAAC;IACpBI,IAAI,EAAE;MAAEC,IAAI,EAAE,WAAW;MAAEC,SAAS,EAAE;IAAM;EAChD,CAAC;EACD,MAAMC,GAAG,GAAG;IAAEC,IAAI,EAAEd,IAAI,CAACC,EAAE,CAAC;EAAE,CAAC;EAE/BG,EAAE,CAACL,OAAO,CAACgB,eAAe,CAACC,OAAO,CAACC,OAAO,CAACZ,IAAI,CAAC,CAAC;EAEjD,MAAMH,UAAU,CAACM,GAAG,EAAEK,GAAG,CAAC;EAE1BK,MAAM,CAACd,EAAE,CAACF,UAAU,CAACJ,IAAI,CAACqB,KAAK,CAACC,MAAM,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC;EAC/CH,MAAM,CAACd,EAAE,CAACF,UAAU,CAACJ,IAAI,CAACqB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACE,IAAI,CAACb,GAAG,CAACC,MAAM,CAACH,EAAE,CAAC;EAC1DY,MAAM,CAACd,EAAE,CAACF,UAAU,CAACJ,IAAI,CAACqB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACG,OAAO,CAAC;IAC3CX,IAAI,EAAE,WAAW;IACjBC,SAAS,EAAE;EACf,CAAC,CAAC;EAEFM,MAAM,CAACd,EAAE,CAACL,OAAO,CAACD,IAAI,CAACqB,KAAK,CAACC,MAAM,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC;EAC5CH,MAAM,CAACd,EAAE,CAACL,OAAO,CAACD,IAAI,CAACqB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACE,IAAI,CAACb,GAAG,CAACC,MAAM,CAACH,EAAE,CAAC;EAEvDY,MAAM,CAACL,GAAG,CAACC,IAAI,CAAChB,IAAI,CAACqB,KAAK,CAAC,CAAC,CAAC,CAACC,MAAM,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC;EAC7CH,MAAM,CAACL,GAAG,CAACC,IAAI,CAAChB,IAAI,CAACqB,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACG,OAAO,CAACjB,IAAI,CAAC;AACnD,CAAC,CAAC"}